// Arobase - Alexandre Joseph - MIT license
(function(){function h(c,d){for(var b in c){var a=c[b],e=this.input.getAttribute("data-"+b.toLowerCase());this[b]=a instanceof Function?null:e;this[b]||0===this[b]||(this[b]=b in d?d[b]:a)}}function a(c,a){return"string"===typeof c?(a||document).querySelector(c):c||null}function f(c,a){return k.call((a||document).querySelectorAll(c))}function g(){f(".arobase").forEach(function(a){new Arobase(a)})}var e=function(c,d){var b=location.hostname.split(".");this.input=a(c);d=d||{};h.call(this,{mailbox:this.input.innerHTML,
domain:b.slice(-2)[0],tld:1<b.length?b.slice(-1)[0]:null},d);a.bind(this.input,{click:function(){window.location="mailto:"+this.mailbox+"@"+this.domain+(this.tld?"."+this.tld:"")}});this.offuscate();this.style();e.all.push(this)};e.prototype={offuscate:function(){this.input.innerHTML=a.offuscate_word(this.mailbox)+a.offuscate_letter("@")+a.offuscate_word(this.domain)+(this.tld?a.offuscate_letter(".")+a.offuscate_word(this.tld):a.random_padding())},style:function(){this.input.style.cursor="pointer"}};
e.all=[];var k=Array.prototype.slice;a.bind=function(a,d){if(a)for(var b in d){var e=d[b];b.split(/\s+/).forEach(function(b){a.addEventListener(b,e)})}};a.randint=function(a,d,b){var e;b||(b=[]);do e=a+Math.ceil(Math.random()*(d-a));while(-1!==b.indexOf(e));return e};a.random_padding=function(){for(var c=[],d=a.randint(1,10);0<d;--d)c.push("&#0"+("0"+a.randint(1,31,[9,10,13])).slice(-2)+";");return c.join("")};a.offuscate_letter=function(c){return a.random_padding()+"&#"+String.charCodeAt(c)+";"};
a.offuscate_word=function(c){for(var d=[],b=0;b<c.length;++b)d.push(a.offuscate_letter(c.charAt(b)));d.push(a.random_padding());return d.join("")};"undefined"!==typeof Document&&("loading"!==document.readyState?g():document.addEventListener("DOMContentLoaded",g));e.$=a;e.$$=f;"undefined"!==typeof self&&(self.Arobase=e);"object"===typeof exports&&(module.exports=e);return e})();
